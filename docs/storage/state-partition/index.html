<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Persistent State Partition #  BurmillaOS will store its state in a single partition specified by the dev field. The field can be a device such as /dev/sda1 or a logical name such LABEL=state or UUID=123124. The default value is LABEL=BURMILLA_STATE. The file system type of that partition can be set to auto or a specific file system type such as ext4.
#cloud-config rancher: state: fstype: auto dev: LABEL=BURMILLA_STATE For other labels such as BURMILLA_BOOT and BURMILLA_OEM and BURMILLA_SWAP, please refer to Custom partition layout."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content><meta property="og:description" content="Persistent State Partition #  BurmillaOS will store its state in a single partition specified by the dev field. The field can be a device such as /dev/sda1 or a logical name such LABEL=state or UUID=123124. The default value is LABEL=BURMILLA_STATE. The file system type of that partition can be set to auto or a specific file system type such as ext4.
#cloud-config rancher: state: fstype: auto dev: LABEL=BURMILLA_STATE For other labels such as BURMILLA_BOOT and BURMILLA_OEM and BURMILLA_SWAP, please refer to Custom partition layout."><meta property="og:type" content="article"><meta property="og:url" content="https://burmillaos.org/docs/storage/state-partition/"><meta property="article:modified_time" content="2020-12-15T08:48:56+01:00"><title>State Partition | BurmillaOS</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.6cd8553a6854f4812343f0f0c8baca31271e686434f381fbe3c7226f66639176.css integrity="sha256-bNhVOmhU9IEjQ/DwyLrKMSceaGQ084H748cib2ZjkXY="><script defer src=/en.search.min.c634dc726e22de97c21b4de0ddf445e5ca5eefd91c841517e000e6a9030fb3eb.js integrity="sha256-xjTccm4i3pfCG03g3fRF5cpe79kchBUX4ADmqQMPs+s="></script><script defer src=/sw.min.74a8bb07f0bee86d6bb9a2750f073f14d93c7e4512f28860370cfd879e9719b4.js integrity="sha256-dKi7B/C+6G1ruaJ1Dwc/FNk8fkUS8ohgNwz9h56XGbQ="></script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/><span>BurmillaOS</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/docs/quick-start-guide/>Quick Start Guide</a></li><li><a href=/docs/installation/ class=collapsed>Installation</a></li><li><a href=/docs/configuration/ class=collapsed>Configuration</a></li><li><a href=/docs/networking/ class=collapsed>Networking</a></li><li><a href=/docs/storage/ class=collapsed>Storage</a><ul><li><a href=/docs/storage/custom-partition-layout/>Custom Partition Layout</a></li><li><a href=/docs/storage/additional-mounts/>Additional Mounts</a></li><li><a href=/docs/storage/state-partition/ class=active>State Partition</a></li><li><a href=/docs/storage/using-zfs/>Using ZFS</a></li></ul></li><li><a href=/docs/system-services/ class=collapsed>System Services</a></li><li><a href=/docs/additional-resources/ class=collapsed>Aditional Resources</a></li><li><a href=/docs/faqs/>FAQs</a></li><li><a href=/docs/releases/>Releases</a></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>State Partition</strong>
<label for=toc-control></label></div></header><article class=markdown><h1 id=persistent-state-partition>Persistent State Partition
<a class=anchor href=#persistent-state-partition>#</a></h1><p>BurmillaOS will store its state in a single partition specified by the <code>dev</code> field. The field can be a device such as <code>/dev/sda1</code> or a logical name such <code>LABEL=state</code> or <code>UUID=123124</code>. The default value is <code>LABEL=BURMILLA_STATE</code>. The file system type of that partition can be set to <code>auto</code> or a specific file system type such as <code>ext4</code>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#75715e>#cloud-config</span>
<span style=color:#f92672>rancher</span>:
  <span style=color:#f92672>state</span>:
    <span style=color:#f92672>fstype</span>: <span style=color:#ae81ff>auto</span>
    <span style=color:#f92672>dev</span>: <span style=color:#ae81ff>LABEL=BURMILLA_STATE</span>
</code></pre></div><p>For other labels such as <code>BURMILLA_BOOT</code> and <code>BURMILLA_OEM</code> and <code>BURMILLA_SWAP</code>, please refer to
<a href=/docs/storage/custom-partition-layout/>Custom partition layout</a>.</p><h2 id=autoformat>Autoformat
<a class=anchor href=#autoformat>#</a></h2><p>You can specify a list of devices to check to format on boot. If the state partition is already found, BurmillaOS will not try to auto format a partition. By default, auto-formatting is off.</p><p>BurmillaOS will autoformat the partition to <code>ext4</code> (<em>not</em> what is set in <code>fstype</code>) if the device specified in <code>autoformat</code>:</p><ul><li>Contains a boot2docker magic string</li><li>Starts with 1 megabyte of zeros and <code>rancher.state.formatzero</code> is true</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#75715e>#cloud-config</span>
<span style=color:#f92672>rancher</span>:
  <span style=color:#f92672>state</span>:
    <span style=color:#f92672>autoformat</span>:
    - <span style=color:#ae81ff>/dev/sda</span>
    - <span style=color:#ae81ff>/dev/vda</span>
</code></pre></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/burmilla/burmilla.github.io/commit/725c239e2321e5166817625f2c35acb081512505 title="Last modified by Dominic Giebert | December 15, 2020" target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>December 15, 2020</span></a></div></div></footer><label for=menu-control class="hidden book-menu-overlay"></label></div></main></body></html>